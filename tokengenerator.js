const { URLSearchParams } = require('url');
require('dotenv').config();
console.log('secret', process.env.CANVA_SECRET_KEY);
const code_challenge = 'k_zeMCQ40Hbs7LAyPkauQTTTm2ddzz1NDlBzYJJVHyg';
const code =
  'eyJraWQiOiJlODZiMTIwMy1iMWY1LTQ4N2MtYjBiOS0yN2U0MmI2ZjMzZDkiLCJhbGciOiJSUzI1NiJ9.eyJqdGkiOiJRbktEQmd5NUlqTWhIVVZrYmdPU2hRIiwiY2xpZW50X2lkIjoiT0MtQVphTFV3Znd1OWl4IiwiYXVkIjoiaHR0cHM6Ly93d3cuY2FudmEuY29tIiwiaWF0IjoxNzQ2MTE4MjI5LCJuYmYiOjE3NDYxMTgyMjksImV4cCI6MTc0NjExODgyOSwic3ViIjoib1VXcGdvMWZHcWVQVGltcUFGYldnQSIsImJyYW5kIjoib0JXcGdGU3F3WWJiNlZ0ZnNfTWZoQSIsIm9yZ2FuaXphdGlvbiI6bnVsbCwic2NvcGVzIjpbImRlc2lnbjpjb250ZW50OnJlYWQiLCJkZXNpZ246bWV0YTpyZWFkIiwiZGVzaWduOmNvbnRlbnQ6d3JpdGUiLCJmb2xkZXI6cmVhZCIsImFzc2V0OnJlYWQiLCJhc3NldDp3cml0ZSIsImJyYW5kdGVtcGxhdGU6bWV0YTpyZWFkIiwiYnJhbmR0ZW1wbGF0ZTpjb250ZW50OnJlYWQiLCJwcm9maWxlOnJlYWQiXSwicm9sZXMiOiJIV0Rqa0puZ1ZJVmx6ZlhTZnZKamNzV19aMDJ0Wk1hYUxETEZNUzJTZVc0bzNobFFaVmk3WWh1V3g3SXdpVDRWazhld0stVE9oMjNfLW5GeTJfTzM0Ul9OSmRIaFhFZk5jV09nR0QxMEtOQlhXUmxwbzBEelY5aFNZMjUzRTBjRURYejNoYWFsTVlldHNLYkcwZUxCZ3RoT3JQOCIsImxvY2FsZSI6ImdidWdaQTZ4ekZZNGdXQnVSb3d0QU9JZlIzckZnV1ZGZkpJZTdHY25kT0ZFVkJCb3p5Z2hQaXY5Q2w1ZjF1dHNVU0V5UnciLCJidW5kbGVzIjpbIlBBSUQiXSwicGtjZSI6IktkUXhRcEw4YmFZVzk3X3BEdHhHTGY5RXlZOEtVempxSGZDbVdORUlEZ0x0OG03UUU1LWF3VnFDeE1kZlMwTDktVlpUSTMwcVlWMm1zSjZFZlNReUNmblUzTG5hS1NNc2pEZ2VxbWswX2dQeEd1c2YifQ.TUYPdl54qGTGVlOTms0HhEkjukl75_Gp4O2LBaj7-RRZwSVHpJAVoiV9je9h07dbvgb0j64Kfyd5jLwRjOoE8tFpbOWon2uvmzB4_saHeaF0n49jcitHoQ1YqwRH_jjeVmtVKzfmqKmdK0Dub9xQqpArcLd01_smupCSvhQevUYY0crGxwuSjsB_GfAoB7rhA88befXOceJSERokdD1b6hIsR_XS-gtbzwVF9C2QsVyoGLy2kp8CSIUCoywDBhhcMcvH3Wcb1qIA4HP3hW_61m_2ZkVsjNrPT8ESVfTxqVvy7j7yw5NPIIi-09Pa4SCr4ATxEnBGqlVwoJDpYyOweA';
const code_verifier =
  'hOGDkC4e22xcqhcanNcZ80rkU72WDRjN60UIzT4ctact40ID4UW3AHPM1jeoNR_93uPW5tZJqJ8pcngLJ8sdz-gfzVXCxVl2n9TyMhciW2HBkM-uPYmzcUjlPXpH4V5M';

const tokens = {
  access_token:
    'eyJraWQiOiIyMzY4ZjRhYi00N2ZiLTQwN2MtYjM5Ni00NzgxODcwMjZkN2UiLCJhbGciOiJSUzI1NiJ9.eyJqdGkiOiJKaC1FSTV3OHdxVU12bEUtMXlLcnVBIiwiY2xpZW50X2lkIjoiT0MtQVphTFV3Znd1OWl4IiwiYXVkIjoiaHR0cHM6Ly93d3cuY2FudmEuY29tIiwiaWF0IjoxNzQ2MTE4MzIwLCJuYmYiOjE3NDYxMTgzMjAsImV4cCI6MTc0NjEzMjcyMCwic3ViIjoib1VXcGdvMWZHcWVQVGltcUFGYldnQSIsImJyYW5kIjoib0JXcGdGU3F3WWJiNlZ0ZnNfTWZoQSIsIm9yZ2FuaXphdGlvbiI6bnVsbCwic2NvcGVzIjpbImRlc2lnbjpjb250ZW50OnJlYWQiLCJkZXNpZ246bWV0YTpyZWFkIiwiZGVzaWduOmNvbnRlbnQ6d3JpdGUiLCJmb2xkZXI6cmVhZCIsImFzc2V0OnJlYWQiLCJhc3NldDp3cml0ZSIsImJyYW5kdGVtcGxhdGU6bWV0YTpyZWFkIiwiYnJhbmR0ZW1wbGF0ZTpjb250ZW50OnJlYWQiLCJwcm9maWxlOnJlYWQiXSwicm9sZXMiOiJMcm1IVnJVX2dnbmVEWThwT2hGdHQyYTZHS2F1WFBZMS1FWmJJb1FkMEtnLXU1X1hnLXB0V1BZZFFULXBZMkVSUTVBb1pmd0lBbWhjc09FZkhRZlJwQ3l3ZURaV2dGMHVoSHViTDlBU25HcnUyZFpjRlkxWWxjMlFDQk9lclpRdEtxNXE0eVNZOG0tcFUzbDZzT3hDVE5MRURhVSIsImxvY2FsZSI6IkF4dlh3cnNBcmxaZmZUN20tanpOZENpRjlPZmJrN2wwQlNaUS1wMFdvSnNUd3pkU2dLMldVcFNJMUR1MUlKTmFBeFVwVVEiLCJidW5kbGVzIjpbIlBBSUQiXSwiYWN0X2FzIjoidSIsImNvZGVfaWQiOiJRbktEQmd5NUlqTWhIVVZrYmdPU2hRIn0.hOiWXF85it0b5g6qxpNuUtKm4Pbz-fxQQKkrMPycL-cuUIWRe8TbZEDKsQ5QMmplk6HbSDiGXp2F9lNxGzC_AvxyesfGoRwWav6VvdfPBAHgHMBM_-EvgqYy5OCvuFrTeE7Kcn7ybrBuZzldImywxBQWUtO9IDuNZ0h66F7_JBWAur_Fxh402Jd_5MoX1zKE1mAfGFQpfwrhZaII9TokaK85ujBdJLQ3SFtfOP62hTD_ylNnmccuFUxMU6UPL1_jaj2eBzg4Zsm_SB4bxo7n77Ro-UOrVPSf-HhW_R8pr4qu1FmX8atr8AX-m-ubdvKFIpuxwUvcSX7HcpLqMD2_Qw',
  refresh_token:
    'eyJhbGciOiJSU0EtT0FFUC0yNTYiLCJlbmMiOiJBMTI4Q0JDLUhTMjU2Iiwia2lkIjoiZmQ1YmU1MTMtZjAzNy00M2NkLTg3OGEtNjQ1OWJmMGEwNzA4IiwiY3R5IjoiSldUIiwianRpIjoiVnc0eVdwbUpFZ2pPTkZnT0sxNG4xdyIsImNsaWVudF9pZCI6Ik9DLUFaYUxVd2Z3dTlpeCIsImF0X2xlYXN0IjoxMjA5NjAwMDAwfQ.f8NoNm1zdAu-gRRG_QW-KNkPe-zYrhFh4VahC7zMOWIa-E1YmxrQFfsBjz4cg40B5zq8Fzjttx48z9_uLhXdu2-e_vrve7XPQ0s0qqMln_3FTP8DgpMWDIrI7rsAEmGQPkup82ydsfuJj4UqF3Hv4QNprPx67hDxQvnVNH1H0L35_YC0kIQNmQCwTRuVa5JeLUXcJ5cRe3hnl7g-b-_pch9f8bBlWa4n_DlL75-G66kxDKR2LIp5E8RNxedUeeDP_brK9YwqTFIH7plt5EZC9yoNydzrnXpDH76sSbVbTJyP2GZPSOmozfgs2P9YrGdh83FToCzq3GknZxwFX7bsCA._MGWHQUdS7wIg3AmS5HoqQ.yBH6jqSxS_ysNODvnlShe8Mrd9_BZDGuaGr8yY4iRfId7HMXZ4Huoyn8TrSbJdgq4yKUDxMWj2zrLu2f8BNeFQX2INzdhA4kDJYGsalfMX9Yxrli5CvBCy9VETOXYnxRT07DlP_ER5Aj-wjAsHXhoQ--itPRLQGCd-ap4GbhcoLb_umKeEjT6MU_FOQJ5uSG6Fd8BYsyst-fv3Nvy7oWCtPP9rLDcoCcKtXVDs09P9MVpsvO5ggkN78RupgrcZfSWI7fMqb4JLNctc_LjmvDvcG57yQczRx8GmWsB9XgwyqwU8WmAPF4z8iaXTNiZ5K8iq5ngD8RLVKATvwOWZ4CExCU_je898ynEJ6HBjMFiASdXC_znloe0GlUW4S3vAYqBG3Erh8Qv7rcn1Z-9EsskN7XAfVu_Qxc396f_TmO3kckDHkRKeqflZNXvehXGStiSDTDKdxJKx18kmTVLVeJm8lCU5e5EZchjTkPpc3ZebyjOPZLeSLZ11b8t3UNcnhni_XZz3j3Fgqm9uzKbD1o_NdiIXIVEqHtuK_MR-P2iga9EsS2t2V3EgD9c9VFCkqYcmsCOzjhYr3Ay5xlBr1r-nCq2K_YjsEvGuKO34Cd9x4-PLgkGqcN6JOaqji5oo9A_vYoqKRSU9wXNfJRN-vLd_dFgELulqRDJJNSfL0XtJTkwyEStSZYygYBl2I7iO0ZfI1_wMXk4uDJUA4wqSUGgfqWqwFsCD2jfLsXaOL0ZArb-jHB7cX0HSn7pbs5ieUk1kbO5s6iAdz2jBP4E_8tYE7nEQFhixKh7qikOIdLvqhsMUJPK7qgANihqfLBCTBAzH32nM01rlBY8T_DAQaB8yhsxKpB40zLIm4dNqtVSbGfFD0mIuWS_YpEJow9GT7BvLP4AvSpKeQdMLIMY4iFD0sI8g5p8aZcB9bcOErajLl6jUeDJc1mEP_P1M4GXmFfUfutMnlwv2d_TC9YztPVSQHgW93IIfx4KChmnjQiSA1mXBlt3Li8iBAqVEw6B2Q-s7IlNm19OcOiK92kHnxshS4mUghB0cVRDaYjWYIfZuKpBJZtG56dSmU5IclzGwtT2zb97kq7t67nuIcBMuv3AE9OsEIsyfi3skKI8hoFVUcth5_tY4c0TYlxxSbYnHuGIFN3qtW77JV3cvdJYU4PrTYc24SvsdMr87YMitYqirkLBxkcH69F1wwKR0PeiFsLwmApRgrGt1jI6GL2awdUCC34kUowlZzBrDYlRrF0NvvBw8cdfLz1EcztEfBdNSNahdLu9wgtk3nDg1ONI2O4u5FBbdaN-85LK5fz6H5x6uadcbLSAW25Xzh8fvkUx8Az51SiZKMGQ0evaNIjAtZ3u5vbzaUbu95Dm1w7EdJua3n-yqffGm8NMmzsv28VorO8do63wMQ5MmCJ5WxtacahE63JGGEbzbsXuACMMcdJn0aYNI2du-JMTHb0I8ZUhQnf0yEcVUwLLJFIIBKyRcL9tJwQ1XltPzGAgLNlY6H3TKT5WzyjtWeT3-mlg2TM3eLbC2lVwrY6evUACOMmZBmXgA.I-9d3i6JPJIDD0KWRvzJmw',
};

fetch('https://api.canva.com/rest/v1/oauth/token', {
  method: 'POST',
  headers: {
    Authorization: `Basic {credentials}`,
    'Content-Type': 'application/x-www-form-urlencoded',
  },
  body: new URLSearchParams(
    `grant_type=authorization_code&code_verifier=${code_verifier}&code=${code}&client_id=${process.env.CANVA_CLIENT_ID}&client_secret=${process.env.CANVA_SECRET_KEY}`,
  ),
})
  .then(async (response) => {
    const data = await response.json();
    console.log(data);
  })
  .catch((err) => console.error(err));
